jobs:
  notify_apply_approval:
    runs-on: ubuntu-latest
    steps:
      - name: Post approval link to Teams
        shell: bash
        run: |
          RUN_URL="${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
          MSG="ðŸš¦ *Approval needed* for Terraform APPLY\nEnvironment: *${{ github.event.inputs.deploy-environment }}*\nRun link: ${RUN_URL}\nOpen link â†’ Review deployments â†’ Approve/Deny."
          curl -H "Content-Type: application/json" \
               -d "{\"text\":\"${MSG}\"}" \
               "${{ secrets.TEAMS_WEBHOOK_URL }}"



MSG="ðŸš¦ Approval required: Terraform APPLY\nâ€¢ Environment: ${{ github.event.inputs.deploy-environment }}\nâ€¢ Run: ${RUN_URL}\n\nAction: Open run â†’ Review deployments â†’ Approve/Deny"


